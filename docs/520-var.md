
## 1. More

- **Role:** Translation interchange standard; bridging development artifacts with CAT tools.
- **Structure:**

```xml
<xliff xmlns="urn:oasis:names:tc:xliff:document:2.0" version="2.0" srcLang="en" trgLang="pl">
<file id="f1">
<unit id="file_count">
  <notes><note>Pluralized string (# substituted)</note></notes>
  <segment>
    <source>{count, plural, one {# file} other {# files}}</source>
    <target>{count, plural, one {# plik} few {# pliki} other {# plików}}</target>
  </segment>
</unit>
</file>
</xliff>
```

- **Plural Handling:** Not native—embedded ICU syntax is the norm; tooling must parse both XML and ICU tokens.
- **Toolchain:** `po2xliff/xliff2po`, Apple Xcode import/export, Okapi/Translate Toolkit, Python `pyliff` or `lxml` for automation.
- **Strengths:** Metadata-rich (notes, states), vendor-neutral, screenshot/context linking.
- **Considerations:** Verbose, requires specialized editors for non-technical users.



## 2. Tooling Ecosystem & Automation Recipes

### 2.1. 4.1 Cornerstone Toolchain

- **Translate Toolkit** (Python/CLI): ≈50 converters, QA filters, format inspectors. Key commands:
- `po2xliff messages.de.po messages.de.xlf`
- `xliff2po messages.de.xlf messages.de.po`
- `md2po README.md README.pot`
- **polib:** DO/die for PO scripting.
- **python-i18n / json** modules:** Lightweight runtime loaders.
- **lxml / ElementTree:** Parse XML-based formats.
- **markdown-it-py:** Python implementation of markdown-it, useful for extracting translatable text from Markdown.


**XML parsing with `lxml` for XLIFF content** — gemi.md:

```python
from lxml import etree
root = etree.fromstring(xliff_content)
for unit in root.xpath('//unit'):
source = unit.find('.//source')
target = unit.find('.//target')
if source is not None and target is not None:
    print(unit.get('id'), source.text, target.text)
```

### 2.2. 4.3 CLI Conversion Cheat Sheet

| Task | Command |
|------|---------|
| PO ➜ XLIFF (agency hand-off) | `po2xliff messages.de.po messages.de.xlf` |
| XLIFF ➜ PO (round-trip) | `xliff2po messages.de.xlf messages.de.po` |

## 3. markdown-it-py

- **markdown-it-py Overview**: As a Python port of the JavaScript markdown-it parser, it provides 100% CommonMark compliance, high-speed parsing, and extensible syntax via plugins. It generates a token stream (AST-like) for manipulation but does not natively render back to Markdown; however, it integrates well with tools like mdformat for serialization, allowing round-trip editing without external dependencies.
- **markdown-it-py Plugins**: The mdit-py-plugins collection includes essential extensions like front-matter for metadata parsing, footnotes for reference notes, definition lists for key-value structures, task lists for checkboxes, and heading anchors for permalinks. These enhance standard Markdown without compromising compliance, though custom plugin development requires familiarity with the token-based system.

markdown-it-py serves as a reliable Python alternative to JavaScript's markdown-it, emphasizing spec compliance and extensibility. It parses Markdown into tokens, enabling AST manipulation before rendering to HTML, and supports options like breaks, HTML allowance, and typographer replacements. For round-tripping (Markdown -> AST -> Markdown), pair it with mdformat's renderer, as shown in examples where tokens are modified (e.g., uppercasing text) and serialized back. Plugin integration uses .use() chaining, with community plugins available via pip extras.

The mdit-py-plugins package offers a suite of core extensions:

| Plugin | Description | Usage Example |
|--------|-------------|---------------|
| Front-Matter | Parses YAML/TOML metadata at document start. | md.use(front_matter_plugin) |
| Footnotes | Adds reference/inline footnotes with optional end placement. | md.use(footnote_plugin, inline=True) |
| Definition Lists | Supports key: value structures like in Pandoc. | md.use(deflist_plugin) |
| Task Lists | Renders checkboxes [ ]/[x] in lists. | md.use(tasklists_plugin, enabled=True) |
| Field Lists | Maps field names to bodies (reStructuredText style). | md.use(fieldlist_plugin) |
| Heading Anchors | Adds IDs and permalinks to headers. | md.use(anchors_plugin, permalink=True) |
| MyST Role/Block | Custom directives for advanced syntax (e.g., roles like {role}`content`). | md.use(myst_role_plugin) |
| AMSMath/Dollarmath | Parses LaTeX math environments. | md.use(amsmath_plugin) |
| Colon Fence | Custom fenced blocks with ::: delimiters. | md.use(colon_fence_plugin) |
| Attributes | Adds {id/class} attributes to elements. | md.use(attributes_plugin) |
| Container | Generic containers for custom blocks. | md.use(container_plugin) |

These plugins maintain CommonMark compliance while adding features, installable via pip install mdit-py-plugins.

